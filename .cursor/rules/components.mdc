---
alwaysApply: true
---

# Component Development Guidelines

## 1. Creating New Components

### Source

- **Try to use Shadcn MCP Server** to get component code when available
- Do not use Shadcn CLI for creating components
- Always manually create the component files
- Grab exactly what is in the manual installation, then adapt to our patterns

### File Organization

> **See [`.cursor/rules/file-structure.mdc`](.cursor/rules/file-structure.mdc) for complete structure patterns**

Extract code into dedicated files:

| Content | File | Example |
|---------|------|---------|
| Types/Interfaces | `types.ts` | `ButtonProps`, `ButtonSize` |
| CVA variants | `consts.ts` | `buttonVariants` |
| Constants/Schemas | `consts.ts` | `TOOLTIP_DEFAULT_SIDE_OFFSET_PX` |
| Hooks | `useHookName.ts` | `useTabsContext.ts` |
| Utilities | `utils.ts` | `reorderDraggableImageGridImages` |

---

## 2. Component Structure

### Data Slot Attribute

**Always add `data-slot` attribute** for styling and easier class modifiers for tailwind:

```tsx
export const Button = (props: ButtonProps) => {
  return (
    <button data-slot='button' {...props}>
      {children}
    </button>
  )
}

// Compound components
const Root = (props: PopoverRootProps) => {
  return <PopoverRoot data-slot='popover' {...props} />
}

const Content = (props: PopoverContentProps) => {
  return <PopoverContent data-slot='popover-content' {...props} />
}
```

## 3. Types

### Type Definition Patterns

```tsx
// types.ts
import type * as React from 'react'
import type { VariantProps } from 'class-variance-authority'
import type { OmitKeys } from '@/lib/utils'
import type { buttonVariants } from './consts'

// Extract variant types from cva
export type ButtonVariant = NonNullable<
  VariantProps<typeof buttonVariants>['variant']
>
export type ButtonSize = NonNullable<
  VariantProps<typeof buttonVariants>['size']
>

// Compose props with
export type ButtonProps = React.ComponentProps<'button'> &
  VariantProps<typeof buttonVariants> & {
    asChild?: boolean
    leftIcon?: AvailableIcons
    isLoading?: boolean
  }
```

### Import Type Convention

Always use `import type` for type-only imports:

```tsx
// ✅ GOOD
import type { ButtonProps } from './types'
import type { VariantProps } from 'class-variance-authority'

// ❌ BAD
import { ButtonProps } from './types'
```

---

## 4. Exports

### Index File Pattern

```tsx
// index.ts

// ✅ GOOD - Named exports only
export { Button } from './Button'
export { buttonVariants } from './consts'
export type { ButtonProps, ButtonVariant, ButtonSize } from './types'

// ❌ BAD - Never use wildcard exports
export * from './Button'
export * from './types'

// ❌ BAD - Never use default exports
export default Button
```

### Export Rules

1. **Export all public types** from `index.ts`
2. **Never use `*` exports** - always use named exports
3. **Do not export internal-only components** (e.g., helper components used only within the file)
4. **Export hooks** that may be useful externally (e.g., `useTabsContext`)
5. **Export utilities** that consumers might need (e.g., `reorderDraggableImageGridImages`)
6. **Export constants/schemas** that consumers might need (e.g., `phoneInputSchema`)

```tsx
// ✅ Internal helper - NOT exported
const AlertTitle = (props: AlertTitleProps) => {
  return <div data-slot='alert-title' {...props} />
}

// ✅ Main component - exported
export const Alert = ({ title, ...props }: AlertProps) => {
  return (
    <div data-slot='alert'>
      <AlertTitle>{title}</AlertTitle>
    </div>
  )
}
```

---

## 5. Hooks

### Hook File Naming

- Context hooks: `useComponentContext.ts`
- Feature hooks: `useFeatureName.ts`
- General hooks: `use-hook-name/useHookName.ts` (in hooks folder)

### Context Hook Pattern

```tsx
// useTabsContext.ts
import { createContext, useContext } from 'react'
import type { TabsRootProps, TabsVariant } from './types'

type TabsContextValue = {
  orientation: TabsRootProps['orientation']
  variant: TabsVariant
}

export const TabsContext = createContext<TabsContextValue>({
  orientation: 'horizontal',
  variant: 'default',
})

export const useTabsContext = () => useContext(TabsContext)
```

---

## 6. Compound Components

### Object Export Pattern

```tsx
// Popover.tsx
const Root = (props: PopoverRootProps) => {
  return <PopoverRoot data-slot='popover' {...props} />
}

const Trigger = (props: PopoverTriggerProps) => {
  return <PopoverTrigger data-slot='popover-trigger' {...props} />
}

const Content = ({ className, ...props }: PopoverContentProps) => {
  return (
    <PopoverPortal>
      <PopoverContent
        className={cn('bg-background-raised', className)}
        data-slot='popover-content'
        {...props}
      />
    </PopoverPortal>
  )
}

export const Popover = {
  Root,
  Trigger,
  Content,
}
```

### Usage

```tsx
<Popover.Root>
  <Popover.Trigger>Open</Popover.Trigger>
  <Popover.Content>Content here</Popover.Content>
</Popover.Root>
```

---

## 7. Radix UI Integration

### Import Pattern

Rename Radix primitives to avoid naming conflicts:

```tsx
import {
  Root as PopoverRoot,
  Trigger as PopoverTrigger,
  Content as PopoverContent,
  Portal as PopoverPortal,
} from '@radix-ui/react-popover'
```

### Type Pattern

```tsx
// types.ts
import type { ComponentProps } from 'react'
import type * as PopoverPrimitive from '@radix-ui/react-popover'

export type PopoverRootProps = ComponentProps<typeof PopoverPrimitive.Root>
export type PopoverTriggerProps = ComponentProps<typeof PopoverPrimitive.Trigger>
export type PopoverContentProps = ComponentProps<typeof PopoverPrimitive.Content>
```

---

## 8. Quick Reference

### Component Checklist

- [ ] Use Shadcn MCP Server as source when available
- [ ] Extract types to `types.ts`
- [ ] Extract variants/constants to `consts.ts`
- [ ] Add `data-slot` attribute when possible
- [ ] Use arrow functions for components and helpers
- [ ] Use `import type` for type imports
- [ ] Export all types from `index.ts`
- [ ] No wildcard (`*`) exports
- [ ] No default exports
